# Удалённый доступ

[nc-forward-ports]: https://github.com/nextcloud/nextcloudpi/wiki/Configuration-Reference#nc-forward-ports
[freeDNS]: https://github.com/nextcloud/nextcloudpi/wiki/Configuration-Reference#freeDNS
[no-ip]: https://github.com/nextcloud/nextcloudpi/wiki/Configuration-Reference#no-ip
[letsencrypt]: https://github.com/nextcloud/nextcloudpi/wiki/Configuration-Reference#letsencrypt

Вы можете выполнить эти шаги из TUI или из WebUI.

#### Перенаправление портов
Большинство домашних роутеров поставляются с брандмауэром, который блокирует внешние запросы для внутренних компьютеров. Чтобы получить доступ к вашему Nextcloud из-за приделов вашего дома, вы должны разрешить порты 80 и 443, и направить их на ваш NextcloudP.
 
Перенаправление портов может быть настроено в интерфейсе конфигурации вашего роутера, или с помощью универсального NextCloudP клиента Plug-and-Play (UPnP) [`nc-forward-ports`][nc-forward-ports] , который сделает процедуру еще проще.

Внимание: *В настройках роутера необходимо временно включить UPnP. После запуски команды рекомендуется отключить UPnP.

1. Перейдите к [`nc-forward-ports`][nc-forward-ports] в TUI или в WebUI.
2. Установите порты, на которых работает ваш Nextcloud. (Рекомендуется использовать настройки по умолчанию)

#### DDNS
Если вы хотите получить доступ к Nextcloud из-за пределов вашего дома, вам понадобится домен (ex cloud.com) или суб-домен (cloud.example.com). Домены это имена, которые указывают ваш IP-адрес. Но большинство домашних пользователей не имеют статический IP-адрес. У вас наверно тоже есть динамический IP-адрес, а это значит что время от времени он меняется. Поэтому, если вы хотите чтобы ваш суб-домен всегда указывал ваш IP-адрес, вам нужна служба DDNS (Динамический DNS).

NextCloudPi имеет два разных DDNS клиента для двух разных DDNS провайдеров ([FreeDNS](http://freedns.afraid.org/), [No-IP](https://www.noip.com)). Вы должны зарегистрировать учетную запись с ихнего веб-сайта. Там вы можете создать бесплатный суб-домен, или соединить домен который вы приобрели. 

Внимание: Вам понадобится только одна служба DDNS.

Прочитайте [это руководство](https://github.com/nextcloud/nextcloudpi/wiki/How-to-access-NextCloudPi#using-your-ddns-domain-inside-and-outside-home) , если у вас будут проблемы доступа с URL-адресом домена DDNS из вашего дома.

##### FreeDNS (freedns.afraid.org)
Запустите TUI (`nextcloud-config`) или используйте WebUI.
Войдите в freedns.afraid.com и нажмите "Динамический DNS". Нажмите правой кнопкой мыши на "Прямой URL" который рядом с вашей записью. Вставьте его в текстовый редактор, и выберите только хеш (символы после "?").
1. Перейдите к [`freeDNS`][freeDNS] в TUI или в WebUI.
2. Поменяйте 'ACTIVE' на 'yes'. 
3. Поменяйте 'ОБНОВИТЬ ХЭШ' и введите ваш (удалите пример и скопируите с ctrl+shift+V)
4. Поменяйте 'ДОМЕН' и введите Домен который вы зарегистрировали.
5. (Необязательно) Поменяйте 'ОБНОВИТЬ ИНТЕРВАЛ' на интервал времени, в течение которого вы хотите чтобы клиент обновил ваш IP-адрес (динамические IP-адреса редко меняются, поэтому вы можете оставить значение по умолчанию (5 минут)).
6. Нажмите Выполнить или Пуск.

Теперь попробуйте посетить ваш суб-домен, который вы зарегистрировали в своем браузере. Он должен перейти к Nextcloud экземпляру.

##### No-IP (www.noip.com)
Запустите TUI (`nextcloud-config`) или используйте WebUI.
1. Перейдите к [`no-ip`][no-ip] в TUI или в WebUI.
2.Поменяйте 'ACTIVE' на 'yes'.
3.Поменяйте 'USER' (ПОЛЬЗОВАТЕЛЬ) на свое имя пользователя.
4.Поменяйте 'PASS' (ПАРОЛЬ) на свой пароль.
5.Поменяйте 'DOMAIN' (ДОМЕН) с вашим (суб)Доменом.
6.Поменяйте 'TIME' (ВРЕМЯ) с интервалом времени, в течение которого вы хотите обновить запись DNS. По умолчанию 30 минут.
7.Нажмите Выполнить или Пуск.

Теперь попробуйте посетить ваш суб-домен, который вы зарегистрировали в своем браузере. Он должен перейти к Nextcloud экземпляру.

### Automatic signed SSL certificates 
Чтобы доверить подключению к сайту и отправить ваше имя пользователя/пароль, вам нужен сертификат SSL. Сертификат SSL гарантирует что связь зашифрована, и всё что вы отправляете может просматривать только сервер, а не кто-то кто олицетворяеть его. По умолчанию NextCloudPi предоставляет сертификат SSL который самоподписанный, для шифрования вашей информации, но рекомендуется использовать сертификат из центра сертификации. NextCloudPi может выполнить Let's Encrypt(давайте зашифровать) клиент который получает сертификат для вашего (суб)Домена с https://letsencrypt.org . NextCloudPi настраивает веб-сервер так чтобы вы могли использовать сертификат, и обновляет его раз в месяц.

Чтобы настроить автоматически подписанные SSL-сертификаты (запустите TUI ('nextcloud-config')  или используйте WebUI):
1. Перейдите к 'letsencrypt' в TUI или в WebUI.
2. Поменяйте 'ДОМЕН' с вашим (суб)Доменом.
3. Поменяйте 'ЭЛ. АДРЕС' с вашим эл.адресом.(Рекомендуется использовать действующий эл.адрес)
4. Нажмите Выполнить или Пуск.

